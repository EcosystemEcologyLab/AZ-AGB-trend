---
title: "Trends in Above Ground Biomass in Arizona"
format: gfm
editor: visual
---

<!-- README.md is generated from README.qmd. Please edit that file -->

<!-- badges: start -->

[![Project Status: WIP â€“ Initial development is in progress, but there has not yet been a stable, usable release suitable for the public.](https://www.repostatus.org/badges/latest/wip.svg)](https://www.repostatus.org/#wip)

<!-- badges: end -->

This is a research compendium for work in progress comparing trends in above-ground biomass in Arizona from different data products.
This is a collaboration between [CCT-Data Science](https://datascience.cct.arizona.edu/) and the [David Moore lab](https://djpmoore.tumblr.com/home) at University of Arizona.

## Reproducibility

### `renv`

This project uses [`renv`](https://rstudio.github.io/renv/articles/renv.html) for package management.
When opening this repo as an RStudio Project for the first time, `renv` should automatically install itself and prompt you to run `renv::restore()` to install all package dependencies.

### `targets`

This project uses the [`targets` package](https://docs.ropensci.org/targets/) for workflow management.
Run `targets::tar_make()` from the console to run the workflow and reproduce all results.
The graph below shows the workflow:

```{r}
#| echo: false
#| message: false
#| warning: false
#| results: asis
cat(
  "```mermaid",
  targets::tar_mermaid(targets_only = TRUE, reporter = "silent"),
  "```",
  sep = "\n"
)
#this should display correctly on GitHub, or code can be pasted into https://mermaid.live
```

Two packages that extend `targets` are used as well: `tarchetypes` and `geotargets`.
[`geotargets`](https://njtierney.github.io/geotargets/) is under development by Eric Scott and Nick Tierney and allows `targets` to work with `SpatRaster` objects created by `terra::rast()`.

## Files

Files related to `renv`:

-   `_targets_packages.R` is generated by `targets::tar_renv()` to make it easier for `renv` to discover dependencies used in the targets pipeline.
    Do not edit by hand.

-   `.renvignore` tells `renv` which files **not** to scan when discovering dependencies

-   `.Rprofile` allows `renv` to bootstrap itself when the project is opened.
    Do not edit by hand.

-   `renv/` contains the local package library and other things that should not be edited by hand

-   `renv.lock` is the JSON file containing information on this project's dependencies.
    Should not be edited by hand.

Files related to `targets`:

-   `_targets/` is the target store and should not be edited by hand.

-   `_targets.R` defines the targets pipeline including options and what steps are run.

-   `R/` contains functions that are sourced (loaded) when the targets pipeline is run.
    This is where you'll find all the "custom" functions used in `_targets.R`

-   `tiles/` and the files in it are created by the "tiles" target defined in `_targets.R`.

Other files:

-   `data/` is where the input data products live.
    I've copied this from snow, but it is *possible* to use files on snow directly, although it is slower to run the pipeline.
    See comments in `_targets.R`

-   `docs/` is a special folder in that any html file in it will be published to GitHub pages.

-   `notes/` currently just contains some notes on how to modify this project to run on the HPC.

-   `output/` used to save output from targets pipeline when `format = "file"`
